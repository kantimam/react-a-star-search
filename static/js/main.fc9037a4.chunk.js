(this["webpackJsonppath-finder"]=this["webpackJsonppath-finder"]||[]).push([[0],{11:function(e,t,i){e.exports=i(18)},16:function(e,t,i){},17:function(e,t,i){},18:function(e,t,i){"use strict";i.r(t);var n=i(0),s=i.n(n),a=i(6),r=i.n(a),h=(i(16),i(17),i(3)),o=i(4),l=i(9),c=i(7),d=i(2),u=i(10),f=i(1),g=function(e){var t=e.finder,i=e.reset,a=e.uiMode,r=e.updateDim,h=Object(n.useState)(!1),o=Object(f.a)(h,2),l=o[0],c=o[1],d=Object(n.useState)(t.frameRate),u=Object(f.a)(d,2),g=u[0],m=u[1],p=Object(n.useState)(t.fieldWidth),v=Object(f.a)(p,2),b=v[0],S=v[1],w=Object(n.useState)(t.fieldHeight),y=Object(f.a)(w,2),E=y[0],k=y[1];return t?s.a.createElement("div",{id:"uiContainer",className:"fancyShadow"},l?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"inputWrapper"},s.a.createElement("div",{className:"fancyShadow"},s.a.createElement("p",null,"FPS ",g),s.a.createElement("input",{onChange:function(e){return m(e.target.value)},type:"range",min:"1",max:"60",value:g})),s.a.createElement("div",{className:"fancyShadow"},s.a.createElement("p",null,"COL ",b),s.a.createElement("input",{onChange:function(e){return S(e.target.value)},type:"range",min:"2",max:"100",value:b})),s.a.createElement("div",{className:"fancyShadow"},s.a.createElement("p",null,"ROW ",E),s.a.createElement("input",{onChange:function(e){return k(e.target.value)},type:"range",min:"2",max:"100",value:E}))),s.a.createElement("button",{onClick:function(e){e.preventDefault(),b==t.fieldWidth&&E==t.fieldHeight||(t.setSize(b,E),r(b,E)),t.frameRate=g,c(!1)},id:"settingsButton",className:"fancyShadow"},"UPDATE")):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{onClick:function(){return c(!0)},className:"toggleSettings fancyShadow"},"X"),s.a.createElement("h1",{className:"fancyShadow infoHeader"},a),s.a.createElement("button",{className:"fancyShadow",onClick:function(){return t.findRandomPath()}},"random path"),s.a.createElement("button",{className:"fancyShadow",onClick:function(){return t.runStep()}},"STEP"),s.a.createElement("button",{className:"fancyShadow",onClick:function(){return t.run()}},"START"),s.a.createElement("button",{className:"fancyShadow",onClick:i},"RESET"))):s.a.createElement("div",{id:"uiContainer",className:"fancyShadow"},s.a.createElement("h1",{className:"fancyShadow infoHeader"},"LOADING"))},m=i(8);var p=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},v=function(){function e(){Object(h.a)(this,e),this.uiFunction=function(){return console.log("no function to update react ui set")},this.frameRate=10,this.openSet=new Set,this.closedSet=new Set,this.loop=null,this.steps=0,this.finished=!1,this.running=!1,this.path=[],this.setHeuristic=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)},this.checkDia=function(e,t){return e.x-t.x&&e.y-t.y?1.414:1}}return Object(o.a)(e,[{key:"init",value:function(e,t,i,n){this.drawFunction=i,n&&(this.uiFunction=n),this.setSize(e,t)}},{key:"setSize",value:function(e,t){console.log(e,t),this.field=function(e,t){for(var i=new Array(t),n=0;n<i.length;n++)i[n]=new Array(e).fill(0);return i}(Number(e),Number(t)),this.fieldWidth=this.field[0].length,this.fieldHeight=this.field.length,this.reset()}},{key:"reset",value:function(){this.finished=!1,this.running=!1,this.steps=0,this.path=[],this.loop&&clearTimeout(this.loop),this.openSet.clear(),this.closedSet.clear(),this.fillField(),this.start=null,this.end=null,this.fieldFlat=this.field.flat(1),this.drawField(),this.uiFunction("SET START")}},{key:"setStart",value:function(e,t){this.start=this.field[t][e],this.start.draw=1,this.openSet.add(this.start),this.uiFunction("SET END")}},{key:"setEnd",value:function(e,t){this.end=this.field[t][e],this.end.draw=3,this.uiFunction("SET BLOCKED")}},{key:"setStartNode",value:function(e){this.start=e,this.start.draw=1,this.openSet.add(this.start),this.uiFunction("SET END")}},{key:"setEndNode",value:function(e){this.end=e,this.end.draw=3,this.uiFunction("SET BLOCKED")}},{key:"findRandomPath",value:function(){this.finished||this.running||(this.randomStart(),this.randomEnd(),this.run())}},{key:"findFromTo",value:function(e,t){this.start=e,this.end=t,this.run()}},{key:"run",value:function(){var e=this;return this.finished||this.running?(this.uiFunction("RESET FIRST"),console.log("reset before starting a new finder")):this.field.length&&this.drawFunction?this.start?this.end?(this.drawField(),this.findValidPaths(),this.uiFunction("RUNNING"),this.running=!0,void(this.loop=setInterval((function(){e.step()}),1e3/this.frameRate))):console.log("please set a end node. setEnd(x,y)"):console.log("please set a start node. setStart(x,y)"):console.log("seems like init failed")}},{key:"runStep",value:function(){if(this.finished||this.running)return this.uiFunction("RESET FIRST"),console.log("reset before starting a new finder");if(!this.steps){if(!this.field.length||!this.drawFunction)return console.log("seems like init failed");if(!this.start)return console.log("please set a start node. setStart(x,y)");if(!this.end)return console.log("please set a end node. setEnd(x,y)");this.drawField(),this.findValidPaths(),this.uiFunction("CLICK STEP OR RUN")}this.step()}},{key:"step",value:function(){this.openSet.size?(this.findLowestFScore(),this.updateSets(),this.checkNeigbors(),this.drawField(),this.steps++):(clearInterval(this.loop),this.finished=!0,this.running=!1,this.uiFunction("COULD NOT BE SOLVED"),console.log("could not be solved! :("))}},{key:"drawField",value:function(){this.drawFunction(Object(m.a)(this.fieldFlat))}},{key:"createPath",value:function(){for(var e=[],t=this.current;t.cameFrom;)e.push(t),t=t.cameFrom;return e}},{key:"drawPath",value:function(){for(var e=this.createPath(),t=0;t<e.length;t++)e[t].draw=4;this.start.draw=1,this.end.draw=3}},{key:"findLowestFScore",value:function(){this.min=this.openSet.values().next().value;var e=!0,t=!1,i=void 0;try{for(var n,s=this.openSet[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var a=n.value;a.f<this.min.f&&(this.min=a)}}catch(r){t=!0,i=r}finally{try{e||null==s.return||s.return()}finally{if(t)throw i}}this.current=this.min}},{key:"updateSets",value:function(){if(this.current===this.end)return clearTimeout(this.loop),this.current.draw=3,console.log("solved! :3"),this.finished=!0,this.uiFunction("SOLVED! :)"),this.drawPath();this.openSet.delete(this.current),this.closedSet.add(this.current),this.current.draw=2}},{key:"checkNeigbors",value:function(){for(var e=0;e<this.current.neighbors.length;e++)if(!this.closedSet.has(this.current.neighbors[e])){var t=this.current.g+this.checkDia(this.current,this.current.neighbors[e]);if(this.openSet.has(this.current.neighbors[e])){if(t>=this.current.neighbors[e].g)continue}else this.openSet.add(this.current.neighbors[e]);this.current.neighbors[e].g=t,this.current.neighbors[e].cameFrom=this.current,this.current.neighbors[e].h=this.setHeuristic(this.current.neighbors[e],this.end),this.current.neighbors[e].f=this.current.neighbors[e].h+this.current.neighbors[e].g}}},{key:"findNeighbors",value:function(){for(var e=0;e<this.fieldHeight;e++)for(var t=0;t<this.fieldWidth;t++)e>0&&this.field[e][t].neighbors.push(this.field[e-1][t]),t<this.fieldWidth-1&&this.field[e][t].neighbors.push(this.field[e][t+1]),e<this.fieldHeight-1&&this.field[e][t].neighbors.push(this.field[e+1][t]),t>0&&this.field[e][t].neighbors.push(this.field[e][t-1])}},{key:"findValidPaths",value:function(){for(var e=0;e<this.fieldHeight;e++)for(var t=0;t<this.fieldWidth;t++)e>0&&!this.field[e-1][t].blocked&&this.field[e][t].neighbors.push(this.field[e-1][t]),e>0&&t<this.fieldWidth-1&&!this.field[e-1][t+1].blocked&&this.field[e][t].neighbors.push(this.field[e-1][t+1]),t<this.fieldWidth-1&&!this.field[e][t+1].blocked&&this.field[e][t].neighbors.push(this.field[e][t+1]),e<this.fieldHeight-1&&t<this.fieldWidth-1&&!this.field[e+1][t+1].blocked&&this.field[e][t].neighbors.push(this.field[e+1][t+1]),e<this.fieldHeight-1&&!this.field[e+1][t].blocked&&this.field[e][t].neighbors.push(this.field[e+1][t]),e<this.fieldHeight-1&&t>0&&!this.field[e+1][t-1].blocked&&this.field[e][t].neighbors.push(this.field[e+1][t-1]),t>0&&!this.field[e][t-1].blocked&&this.field[e][t].neighbors.push(this.field[e][t-1]),e>0&&t>0&&!this.field[e-1][t-1].blocked&&this.field[e][t].neighbors.push(this.field[e-1][t-1])}},{key:"randomStart",value:function(){this.setStart(p(0,this.fieldWidth-1),p(0,this.fieldHeight-1))}},{key:"randomEnd",value:function(){this.setEnd(p(0,this.fieldWidth-1),p(0,this.fieldHeight-1))}},{key:"fillField",value:function(e){for(var t=0;t<this.fieldHeight;t++)for(var i=0;i<this.fieldWidth;i++)this.field[t][i]=new b(i,t,e)}}]),e}(),b=function e(t,i,n){Object(h.a)(this,e),this.neighbors=[],this.f=0,this.g=0,this.h=0,this.draw=0,this.blocked=!1,this.x=t,this.y=i,this.size=n},S=["white","red","green","blue","yellow","black"],w=Object(n.memo)((function(e){var t=e.width,i=e.height,a=e.item,r=e.nodeOnClick,h=e.createWall,o=Object(n.useState)(S[a.draw]),l=Object(f.a)(o,2),c=l[0],d=l[1];return s.a.createElement("div",{onClick:function(){r(a),h(a),d(S[a.draw])},onMouseMove:function(e){1===e.buttons&&(h(a),d(S[a.draw]))},className:"cell",style:{width:"".concat(t,"px"),height:"".concat(i,"px"),left:"".concat(a.x*t,"px"),top:"".concat(a.y*i,"px"),backgroundColor:c}})})),y=Object(n.memo)((function(e){var t=e.field,i=e.row,a=e.col,r=e.createWall,h=e.nodeOnClick,o=Object(n.useRef)(null),l=Object(n.useState)(0),c=Object(f.a)(l,2),d=c[0],u=c[1],g=function(){if(o.current.clientWidth>0){var e=o.current.clientWidth/a;u(e)}};return Object(n.useLayoutEffect)((function(){g()}),[t,i,a,r,h]),Object(n.useEffect)((function(){return window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}),[]),s.a.createElement("div",{className:"fieldContainer fancyShadow"},s.a.createElement("div",{style:{height:"".concat(d*i,"px")},ref:o,className:"field"},d&&t.map((function(e){return s.a.createElement(w,{key:"key"+e.x+"_"+e.y+"_"+e.draw,width:d,height:d,item:e,nodeOnClick:h,createWall:r})}))))})),E=function(e){function t(e){var i;return Object(h.a)(this,t),(i=Object(l.a)(this,Object(c.a)(t).call(this,e))).fieldRef=s.a.createRef(),i.finder=new v,i.props.frameRate&&(i.finder.frameRate=i.props.frameRate),i.nodeOnClick=i.nodeOnClick.bind(Object(d.a)(i)),i.createWall=i.createWall.bind(Object(d.a)(i)),i.reset=i.reset.bind(Object(d.a)(i)),i.state={field:[],uiMode:"set start",col:i.props.col,row:i.props.row},i}return Object(u.a)(t,e),Object(o.a)(t,[{key:"reset",value:function(){this.setState({uiMode:"set start"}),this.finder.reset(),this.finder.drawField()}},{key:"componentDidMount",value:function(){var e=this;this.finder.init(this.state.col,this.state.row,(function(t){return e.setState({field:t})}),(function(t){return e.setState({uiMode:t})}))}},{key:"nodeOnClick",value:function(e){return this.finder&&this.finder.finished?console.log("already finished. reset and start again"):this.finder&&this.finder.running?console.log("currently running. reset and start again"):"SET START"===this.state.uiMode?this.finder.setStartNode(e):"SET END"===this.state.uiMode?this.finder.setEndNode(e):void 0}},{key:"createWall",value:function(e){if(this.finder&&this.finder.finished)return console.log("already finished. reset and start again");if(this.finder&&this.finder.running)return console.log("currently running. reset and start again");if("SET BLOCKED"===this.state.uiMode){if(e===this.finder.start||e===this.finder.end)return;e.draw=5,e.blocked=!0}}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.finder.fieldWidth&&s.a.createElement(g,{finder:this.finder,reset:this.reset,uiMode:this.state.uiMode,updateDim:function(t,i){return e.setState({col:t,row:i})}}),s.a.createElement(y,{nodeOnClick:this.nodeOnClick,createWall:this.createWall,field:this.state.field,row:this.state.row,col:this.state.col}))}}]),t}(n.Component);var k=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(E,{col:22,row:18,frameRate:20}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.fc9037a4.chunk.js.map